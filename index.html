<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card h2 {
            color: white;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            color: white;
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input[type="text"], input[type="url"], select {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(238, 90, 36, 0.4);
        }

        .generated-link {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            word-break: break-all;
            color: white;
            font-family: monospace;
        }

        .stats-grid {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stats-grid h2 {
            color: white;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 2em;
            color: #ff6b6b;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9em;
        }

        .click-log {
            max-height: 400px;
            overflow-y: auto;
        }

        .click-entry {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid #ff6b6b;
        }

        .click-time {
            color: #ff6b6b;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .click-details {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9em;
        }

        .location-info {
            color: #4ecdc4;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .stats-container {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .header h1 {
                font-size: 2em;
            }
        }

        .copy-btn {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            padding: 8px 15px;
            border-radius: 15px;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 14px;
            margin-left: 10px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(68, 160, 141, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîó Link Tracker Pro</h1>
            <p>Create trackable links and monitor visitor analytics</p>
        </div>

        <div class="main-content">
            <div class="card">
                <h2>üìã Create Tracking Link</h2>
                <form id="linkForm">
                    <div class="form-group">
                        <label for="originalUrl">Original URL:</label>
                        <input type="url" id="originalUrl" placeholder="https://example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="linkName">Link Name (optional):</label>
                        <input type="text" id="linkName" placeholder="My Campaign">
                    </div>

                    <div class="form-group">
                        <label for="redirectType">Redirect Type:</label>
                        <select id="redirectType">
                            <option value="direct">Direct Redirect</option>
                            <option value="preview">Preview Page (shows location request)</option>
                        </select>
                    </div>

                    <button type="submit" class="btn">üöÄ Generate Tracking Link</button>
                </form>

                <div id="generatedLink" style="display: none;">
                    <h3 style="color: white; margin-top: 20px;">Your Tracking Link:</h3>
                    <div class="generated-link">
                        <span id="linkUrl"></span>
                        <button class="copy-btn" onclick="copyLink()">üìã Copy</button>
                    </div>
                </div>
            </div>

                <div class="card">
                <h2>üìä Quick Stats</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-number" id="totalClicks">0</div>
                        <div class="stat-label">Total Clicks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalLinks">0</div>
                        <div class="stat-label">Active Links</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayClicks">0</div>
                        <div class="stat-label">Today's Clicks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="mobileClicks">0</div>
                        <div class="stat-label">üì± Mobile</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="desktopClicks">0</div>
                        <div class="stat-label">üíª Desktop</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="uniqueIPs">0</div>
                        <div class="stat-label">üåê Unique IPs</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <h2>üìà Recent Activity</h2>
            <div class="click-log" id="clickLog">
                <p style="color: rgba(255, 255, 255, 0.6); text-align: center; padding: 20px;">
                    No clicks recorded yet. Create and share your first tracking link!
                </p>
            </div>
        </div>
    </div>

    <script>
        let trackingData = {
            links: {},
            clicks: []
        };

        // Generate unique ID for links
        function generateId() {
            return Math.random().toString(36).substr(2, 8);
        }

        // Get device type from user agent
        function getDeviceType(userAgent) {
            const ua = userAgent.toLowerCase();
            
            if (/tablet|ipad|playbook|silk/.test(ua)) {
                return 'üì± Tablet';
            }
            if (/mobile|iphone|ipod|android|blackberry|opera mini|iemobile|wpdesktop/.test(ua)) {
                return 'üì± Mobile';
            }
            return 'üíª Desktop';
        }

        // Get browser info from user agent
        function getBrowserInfo(userAgent) {
            const ua = userAgent;
            let browser = 'Unknown';
            
            if (ua.includes('Firefox')) browser = 'ü¶ä Firefox';
            else if (ua.includes('Chrome') && !ua.includes('Edge')) browser = 'üåê Chrome';
            else if (ua.includes('Safari') && !ua.includes('Chrome')) browser = 'üß≠ Safari';
            else if (ua.includes('Edge')) browser =

        // Create tracking link
        document.getElementById('linkForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const originalUrl = document.getElementById('originalUrl').value;
            const linkName = document.getElementById('linkName').value || 'Unnamed Link';
            const redirectType = document.getElementById('redirectType').value;
            
            const linkId = generateId();
            const trackingUrl = `${window.location.origin}${window.location.pathname}?track=${linkId}`;
            
            // Store link data
            trackingData.links[linkId] = {
                originalUrl,
                linkName,
                redirectType,
                created: new Date().toISOString(),
                clicks: 0
            };
            
            // Show generated link
            document.getElementById('linkUrl').textContent = trackingUrl;
            document.getElementById('generatedLink').style.display = 'block';
            
            updateStats();
            saveData();
        });

        // Handle link clicks
        function handleLinkClick() {
            const urlParams = new URLSearchParams(window.location.search);
            const trackId = urlParams.get('track');
            
            if (trackId && trackingData.links[trackId]) {
                recordClick(trackId);
                
                const link = trackingData.links[trackId];
                
                if (link.redirectType === 'preview') {
                    showPreviewPage(link);
                } else {
                    window.location.href = link.originalUrl;
                }
            }
        }

        // Record click data
        async function recordClick(linkId) {
            const locationInfo = await getLocationInfo();
            const deviceType = getDeviceType(navigator.userAgent);
            const browserInfo = getBrowserInfo(navigator.userAgent);
            
            const clickData = {
                linkId,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                deviceType: deviceType,
                browser: browserInfo,
                referrer: document.referrer || 'Direct',
                location: locationInfo
            };
            
            trackingData.clicks.push(clickData);
            trackingData.links[linkId].clicks++;
            
            updateStats();
            updateClickLog();
            saveData();
        }

        // Show preview page with location request
        function showPreviewPage(link) {
            document.body.innerHTML = `
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; font-family: 'Segoe UI', sans-serif;">
                    <div style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 40px; max-width: 500px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.2);">
                        <h1 style="color: white; margin-bottom: 20px;">üîó Redirecting...</h1>
                        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 30px;">You're about to visit: <strong>${link.linkName}</strong></p>
                        <button onclick="requestLocation()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 16px; margin: 10px; transition: all 0.3s ease;">
                            üìç Share Location & Continue
                        </button>
                        <button onclick="window.location.href='${link.originalUrl}'" style="background: linear-gradient(45deg, #4ecdc4, #44a08d); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 16px; margin: 10px; transition: all 0.3s ease;">
                            ‚è≠Ô∏è Continue Without Location
                        </button>
                        <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.9em; margin-top: 20px;">
                            Location sharing is optional and helps provide better analytics.
                        </p>
                    </div>
                </div>
                
                <script>
                    function requestLocation() {
                        if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition(
                                function(position) {
                                    // Send precise location data
                                    console.log('Precise location:', position.coords);
                                    window.location.href = '${link.originalUrl}';
                                },
                                function(error) {
                                    console.log('Location access denied');
                                    window.location.href = '${link.originalUrl}';
                                }
                            );
                        } else {
                            window.location.href = '${link.originalUrl}';
                        }
                    }
                </` + `script>
            `;
        }

        // Update statistics
        function updateStats() {
            const totalClicks = trackingData.clicks.length;
            const totalLinks = Object.keys(trackingData.links).length;
            const today = new Date().toDateString();
            const todayClicks = trackingData.clicks.filter(click => 
                new Date(click.timestamp).toDateString() === today
            ).length;
            
            // Device type breakdown
            const mobileClicks = trackingData.clicks.filter(click => 
                click.deviceType && click.deviceType.includes('Mobile')
            ).length;
            
            const desktopClicks = trackingData.clicks.filter(click => 
                !click.deviceType || click.deviceType.includes('Desktop')
            ).length;
            
            // Unique IPs
            const uniqueIPs = new Set(trackingData.clicks.map(click => click.location?.ip).filter(Boolean)).size;
            
            document.getElementById('totalClicks').textContent = totalClicks;
            document.getElementById('totalLinks').textContent = totalLinks;
            document.getElementById('todayClicks').textContent = todayClicks;
            document.getElementById('mobileClicks').textContent = mobileClicks;
            document.getElementById('desktopClicks').textContent = desktopClicks;
            document.getElementById('uniqueIPs').textContent = uniqueIPs;
        }

        // Update click log
        function updateClickLog() {
            const clickLog = document.getElementById('clickLog');
            const recentClicks = trackingData.clicks.slice(-10).reverse();
            
            if (recentClicks.length === 0) {
                clickLog.innerHTML = '<p style="color: rgba(255, 255, 255, 0.6); text-align: center; padding: 20px;">No clicks recorded yet.</p>';
                return;
            }
            
            clickLog.innerHTML = recentClicks.map(click => {
                const link = trackingData.links[click.linkId];
                const time = new Date(click.timestamp).toLocaleString();
                
                return `
                    <div class="click-entry">
                        <div class="click-time">${time}</div>
                        <div class="click-details">
                            <strong>${link ? link.linkName : 'Unknown Link'}</strong><br>
                            <span class="location-info">üìç ${click.location.city}, ${click.location.country}</span><br>
                            <span class="location-info">üåê IP: ${click.location.ip}</span><br>
                            ${click.deviceType || 'üíª Desktop'} ‚Ä¢ ${click.browser || 'Unknown Browser'}<br>
                            üìä Referrer: ${click.referrer}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Copy link to clipboard
        function copyLink() {
            const linkText = document.getElementById('linkUrl').textContent;
            navigator.clipboard.writeText(linkText).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        // Save data to memory (in a real app, this would go to a server)
        function saveData() {
            // In a real application, you'd send this to your server
            console.log('Data saved:', trackingData);
        }

        // Load saved data
        function loadData() {
            // In a real application, you'd load this from your server
            updateStats();
            updateClickLog();
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            handleLinkClick();
        });
    </script>
</body>
</html>
